<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link th:href="@{/list.css}" rel="stylesheet" type="text/css" />
<title>TODOリスト</title>
<script src="https://code.jquery.com/jquery-3.6.0.js"
	integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
	crossorigin="anonymous"></script>
<script type="text/javascript">
	$(function() {
		// 1. 「全選択」する
		$('#all').on('click', function() {
			$("input[name='check']").prop('checked', this.checked);
		});
		// 2. 「全選択」以外のチェックボックスがクリックされたら、
		$("input[name='check']").on('click', function() {
			if ($('#check :checked').length == $('#check :input').length) {
				// 全てのチェックボックスにチェックが入っていたら、「全選択」 = checked
				$('#all').prop('checked', true);
			} else {
				// 1つでもチェックが入っていたら、「全選択」 = checked
				$('#all').prop('checked', false);
			}
		});
	});
</script>
</head>
<body>

	<div class="ribbon1-wrapper">
		<div class="ribbon1">
			<h1>
				<span th:text="'（'+${session.userInfo.name}+' さんのTODOリスト）'"></span>
			</h1>
		</div>
		<br> <br> <span th:replace="menu"></span>
	</div>
	<hr>
	<form action="/selectdelete" method="post">
		<pre><a href="/addList" style="font-size: 20px;">リスト追加</a>   <a href="/log" style="font-size: 20px">削除履歴</a>   <a href="/shareList" style="font-size: 20px">共有リスト</a></pre>
		<hr>
		<table border="1" style="text-align: center;">
			<div class="menu">
				<span th:replace="sort"></span>
			</div>
			<tr style="font-size: 22px">
				<th><label for="all"><input type="checkbox"
						name="allChecked" id="all">全選択</label></th>
				<th>TODO</th>
				<th>期日</th>
				<th colspan="2">
			</tr>
			<tr th:each="todolist:${session.todolists}" style="font-size: 18px">
				<td><div id="check">
						<input type="checkbox" name="check" th:value="${todolist.code}"><label
							class="checkbox">チェック</label>
					</div></td>
				<td><a th:href="'/update/' + ${todolist.code}"
					th:text="${todolist.title}"></a></td>
				<td th:text="${#dates.format(todolist.date,'yyyy-MM-dd')}"></td>
				<td><a th:href="'/delete/'+ ${todolist.code}">削除</a></td>
				<td><a th:href="'/share/'+ ${todolist.code}">共有</a></td>
			</tr>
		</table>
		<br>
		<div class="da">
			<input type="submit" value="まとめて削除" style="font-size: 15px">
		</div>
		<br>

	</form>


	<hr>

	<span th:replace="logout"></span>


</body>
</html>